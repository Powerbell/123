<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body class="container">
    <article class="start">
        <h1 class="mt-5 text-center">나랑 꼭 닮은 동물은?</h1>
        <button type="button" class="btn btn-primary mt-5" onclick='start();'>테스트 시작하기</button>
    </article>
    <article class="question">
        <div class="progress mt-5">
            <div class="progress-bar" role="progressbar" style="width: calc(100/12*1%)"></div>
        </div>
        <h2 id="title" class="text-center mt-5">문제</h2>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="btn btn-primary mt-5">Primary</button>
        <button id="B" type="button" class="btn btn-primary mt-5">Primary</button>
    </article>
    <article class="result">
        <img id="img" class="rounded-circle mt-5" src="lion.jpg" alt="animal">
        <h2 id="animal" class="text-center mt-5">동물이름</h2>
        <h3 id="explain" class="text-center mt-5">설명</h3>
    </article>
    <input type="hidden" id="EI" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        var num = 1;
        var q = {
            1: {"title": "당신은 파티에 왔습니다", "type": "EI", "A": "낯선 사람을 포함해 많은 사람과 교류하나요?", "B": "아는 몇 사람만 이야기 나누나요?"},
            2: {"title": "파티에서 당신의 눈길을 끄는 사람이 있습니다", "type": "EI", "A": "먼저 말을 거시나요?", "B": "말을 걸어 줄 때까지 기다리나요?"},
            3: {"title": "파티에서 12시가 되었습니다", "type": "EI", "A": "더 남아 있으실건가요?", "B": "벌써 사라지셨나요?"},
            4: {"title": "파티에서 집으로 가고 있습니다", "type": "SN", "A": "당신은 원래 다니던 길로 집을 가고 있나요?", "B": "오늘은 새로운 길로 가보고 싶나요?"},
            5: {"title": "집에 도착하니 친구가 전화로 집에 놀러 온다고 합니다", "type": "SN", "A": "당신은 집에 오는 길을 정확하게 설명할 건가요?", "B": "'내가 데리러 갈게.'라고 하나요?"},
            6: {"title": "집에 놀러온 친구가 오늘 있었던 이야기를 막 횡설수설하게 이야기 합니다", "type": "SN", "A": "차례대로 정리해서 듣고 싶다는 마음이 드나요?", "B": "친구의 이야기에 상상을 하고 있나요?"},
            7: {"title": "친구와 이야기 하다보니 여행을 떠나자는 이야기가 나왔습니다", "type": "TF", "A": "친구의 상황과 감정을 신경쓰고 결정을 하시나요?", "B": "너무 갑작스러워서 거절해버리시나요?"},
            8: {"title": "친구가 계속 여행 가자고 조르네요", "type": "TF", "A": "친구가 상처받는게 싫어 같이 가자고 하시나요?", "B": "완곡하게 거절 하시나요?"},
            9: {"title": "여행을 가기로 했습니다. 당신은 계획을 세울 때 어떤 스타일이신가요?", "type": "TF", "A": "친구가 하자는대로 양보하는 편이다", "B": "미리 계획하는 것을 즐긴다"},
            10: {"title": "여행을 가기 전 제출해야 하는 과제가 있습니다", "type": "JP", "A": "제출만 하면 되는 상태인가요?", "B": "과제를 이제 아셨나요?"},
            11: {"title": "과제를 제출하기 위해 책상 앞에 앉았습니다. 당신의 책상 상태는 어떤가요?", "type": "JP", "A": "거의 쓰레기 장이다.", "B": "너무 깔끔해서 빛이 난다"},
            12: {"title": "과제를 제출 후 여행을 떠납니다. 그런데 친구가 계획을 마구 바꿔버리네요", "type": "JP", "A": "더 재밌을 거 같아 신난다", "B": "마음이 불편하다"}
        }
        var result = {
            "ISTJ": {"animal": "생산적인 개미", "explain": "", "img": "ant.png"},
            "ISFJ": {"animal": "원칙적인 코끼리", "explain": "", "img": "elphant.png"},
            "INFJ": {"animal": "신비한 해마", "explain": "", "img": "horse.png"},
            "INTJ": {"animal": "전략적인 문어", "explain": "", "img": "octopus.png"},
            "ISTP": {"animal": "능수능란한 꿀벌", "explain": "", "img": "honey.png"},
            "ISFP": {"animal": "젠틀한 팬더", "explain": "", "img": "panda.png"},
            "INFP": {"animal": "상상력이 풍부한 일각고래", "explain": "", "img": "narwhal.png"},
            "INTP": {"animal": "철학적인 올빼미", "explain": "", "img": "owl.png"},
            "ESTP": {"animal": "에너지 넘치는 비버", "explain": "", "img": "beaver.png"},
            "ESFP": {"animal": "매력적인 수달", "explain": "", "img": "otter.png"},
            "ENFP": {"animal": "열정적인 돌고래", "explain": "", "img": "dolphin.png"},
            "ENTP": {"animal": "영리한 여우", "explain": "", "img": "fox.png"},
            "ESTJ": {"animal": "자신감 넘치는 미어캣", "explain": "", "img": "meerkat.jpg"},
            "ESFJ": {"animal": "협력적인 고래", "explain": "", "img": "whale.png"},
            "ENFJ": {"animal": "낙관적인 강아지", "explain": "", "img": "puppy.jpg"},
            "ENTJ": {"animal": "강력한 곰", "explain": "", "img": "bear.jpg"}
        }
        function start() {
            $(".start").hide();
            $(".question").show();
            next();
        }
        $("#A").click(function(){
            var type = $("#type").val();
            var preValue = $("#"+type).val();
            $("#"+type).val(parseInt(preValue)+1);
            next();
        });
        $("#B").click(function(){
            next();
        });
        function next() {
            if (num == 13) {
                $(".question").hide();
                $(".result").show();
                var mbti = "";
                ($("#EI").val() < 2) ? mbti+="I" : mbti+="E";
                ($("#SN").val() < 2) ? mbti+="N" : mbti+="S";
                ($("#TF").val() < 2) ? mbti+="F" : mbti+="T";
                ($("#JP").val() < 2) ? mbti+="P" : mbti+="J";
                $("#img").attr("src",result[mbti]["img"]);
                $("#animal").html(result[mbti]["animal"]);
                $("#explain").html(result[mbti]["explain"]);
            } else {
                $(".progress-bar").attr('style','width: calc(100/12*'+num+'%)');
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                num++;
            }
        }
    </script>
</body>
</html>